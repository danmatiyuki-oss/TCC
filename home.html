<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Sistema Estudantil</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
  body { font-family: sans-serif; }
  aside button:hover { background-color: #1e40af; }
 
  /* Calendário */
  #calendarioGrid div {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 80px;
    border-radius: 8px;
    font-weight: bold;
    transition: transform 0.2s, background-color 0.2s;
    cursor: pointer;
    position: relative;
  }
  #calendarioGrid div:hover { transform: scale(1.05); background-color: #dbeafe; }
  #calendarioGrid div:nth-child(7n+1), #calendarioGrid div:nth-child(7n) { background-color: #f3f4f6; }
  .hoje { border: 3px solid #1d4ed8; }
  .evento { background-color: #bbf7d0; color: #065f46; }
  .tooltiptext {
    visibility: hidden;
    width: max-content;
    background-color: #333;
    color: #fff;
    text-align: center;
    border-radius: 6px;
    padding: 4px 8px;
    position: absolute;
    z-index: 10;
    bottom: 125%;
    left: 50%;
    transform: translateX(-50%);
    opacity: 0;
    transition: opacity 0.3s;
    font-size: 0.8rem;
  }
  .tooltip:hover .tooltiptext { visibility: visible; opacity: 1; }
 
  /* Fórum */
  #listaForum::-webkit-scrollbar { width: 6px; }
  #listaForum::-webkit-scrollbar-thumb { background-color: rgba(0,0,0,0.3); border-radius: 3px; }
  #listaForum::-webkit-scrollbar-track { background-color: transparent; }
</style>
</head>
<body class="flex h-screen bg-gray-100">
 
<!-- Menu Lateral -->
<aside class="w-64 bg-blue-800 text-white p-4 flex flex-col">
  <h2 class="text-2xl font-bold mb-6">Menu</h2>
  <button onclick="mostrarTela('avisos')" class="text-left py-2 px-4 rounded">Mural de Avisos</button>
  <button onclick="mostrarTela('forum')" class="text-left py-2 px-4 rounded">Fórum</button>
  <button onclick="mostrarTela('calendario')" class="text-left py-2 px-4 rounded">Calendário</button>
  <button onclick="mostrarTela('chapas')" class="text-left py-2 px-4 rounded">Chapas</button>
  <button onclick="mostrarTela('jogos')" class="text-left py-2 px-4 rounded">Jogos</button>
  <button onclick="logout()" class="mt-auto bg-red-600 py-2 px-4 rounded">Sair</button>
</aside>
 
<!-- Conteúdo Principal -->
<main class="flex-1 p-6 overflow-y-auto flex flex-col h-full">
 
  <!-- Avisos -->
  <section id="avisos" class="hidden flex flex-col">
    <h1 class="text-2xl font-bold mb-4">Mural de Avisos</h1>
    <form id="formAviso" class="mb-4 hidden flex">
      <input type="text" id="textoAviso" placeholder="Digite um aviso" class="border p-2 rounded w-2/3">
      <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded">Adicionar</button>
    </form>
    <ul id="listaAvisos" class="space-y-2 flex-1 overflow-y-auto"></ul>
  </section>
 
  <!-- Fórum -->
  <section id="forum" class="hidden flex flex-col h-full">
    <h1 class="text-2xl font-bold mb-4">Fórum</h1>
    <div id="listaForum" class="flex-1 overflow-y-auto mb-4 space-y-2 px-2"></div>
    <form id="formForum" class="flex border-t p-2 bg-white items-center">
      <input type="text" id="textoForum" placeholder="Digite sua mensagem..." class="flex-1 border p-3 rounded-l focus:outline-none focus:ring-2 focus:ring-blue-500">
      <button type="submit" class="bg-green-600 text-white px-4 py-3 rounded-r hover:bg-green-700">Enviar</button>
    </form>
  </section>
 
  <!-- Calendário -->
  <section id="calendario" class="hidden flex flex-col">
    <h1 class="text-2xl font-bold mb-4 text-center">Calendário</h1>
    <div class="flex items-center justify-center space-x-4 mb-4">
      <button onclick="mudarMes(-1)" class="px-3 py-1 bg-gray-300 rounded hover:bg-gray-400">◀</button>
      <span id="mesAtual" class="text-xl font-bold"></span>
      <button onclick="mudarMes(1)" class="px-3 py-1 bg-gray-300 rounded hover:bg-gray-400">▶</button>
    </div>
    <div class="grid grid-cols-7 gap-1 text-center font-semibold mb-1">
      <div>Dom</div><div>Seg</div><div>Ter</div><div>Qua</div>
      <div>Qui</div><div>Sex</div><div>Sáb</div>
    </div>
    <div id="calendarioGrid" class="grid grid-cols-7 gap-1 mb-6"></div>
    <form id="formEvento" class="mb-4 hidden flex flex-wrap gap-2 items-center">
      <input type="date" id="dataEvento" class="border p-2 rounded">
      <input type="text" id="descEvento" placeholder="Descrição" class="border p-2 rounded flex-1">
      <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded">Adicionar Evento</button>
    </form>
    <ul id="listaEventos" class="space-y-2 flex-1 overflow-y-auto"></ul>
  </section>
 
  <!-- Chapas -->
  <section id="chapas" class="hidden flex flex-col">
    <h1 class="text-2xl font-bold mb-4">Chapas e Propostas</h1>
    <form id="formChapa" class="mb-4 hidden flex flex-col gap-2">
      <input type="text" id="nomeChapa" placeholder="Nome da chapa" class="border p-2 rounded w-1/3">
      <textarea id="propostaChapa" placeholder="Proposta da chapa" class="border p-2 rounded w-full h-24 resize-none"></textarea>
      <input type="text" id="integrantesChapa" placeholder="Nomes dos integrantes (separados por vírgula)" class="border p-2 rounded w-full">
      <input type="file" id="imagemChapa" accept="image/*">
      <button type="submit" class="bg-purple-600 text-white px-4 py-2 rounded">Adicionar Chapa</button>
    </form>
    <ul id="listaChapas" class="space-y-4 flex-1 overflow-y-auto"></ul>
  </section>
 
  <!-- Jogos -->
  <section id="jogos" class="hidden flex flex-col">
    <h1 class="text-2xl font-bold mb-4">Jogos</h1>
    <div id="gameMenu" class="flex flex-col mb-4">
      <button onclick="abrirJogo('jogo/jogo-da-memoria.html')" class="bg-blue-600 text-white py-2 px-4 rounded mb-2 hover:bg-blue-700">Jogo da Memória</button>
      <button onclick="abrirJogo('jogo/jogo-do-simon.html')" class="bg-green-600 text-white py-2 px-4 rounded hover:bg-green-700">Jogo do Simon</button>
    </div>
    <div id="gameContainer" class="flex justify-center items-center w-full h-96 border rounded bg-white">
      <p class="text-gray-500">Escolha um jogo acima para jogar.</p>
    </div>
  </section>
 
</main>
 
<script>
  // ---------- Inicialização ----------
  let role = localStorage.getItem("role");
  if(!role) window.location.href="login.html";
 
  function mostrarTela(tela){
    document.querySelectorAll("main section").forEach(sec=>sec.classList.add("hidden"));
    document.getElementById(tela).classList.remove("hidden");
    if(tela==="avisos") renderAvisos();
    if(tela==="forum") renderForum();
    if(tela==="calendario") renderCalendario();
    if(tela==="chapas") renderChapas();
  }
  function logout(){ localStorage.removeItem("role"); window.location.href="home.html"; }
 
  // ---------- Jogos ----------
  function abrirJogo(url){
    document.getElementById("gameContainer").innerHTML = `<iframe src="${url}" class="w-full h-full border-0"></iframe>`;
  }
 
  // ---------- Mural de Avisos ----------
  function loadAvisos(){ return JSON.parse(localStorage.getItem("avisos")||"[]"); }
  function saveAvisos(a){ localStorage.setItem("avisos",JSON.stringify(a)); }
  function renderAvisos(){
    const lista=document.getElementById("listaAvisos"); lista.innerHTML="";
    const avisos=loadAvisos();
    avisos.forEach((a,i)=>{
      const li=document.createElement("li");
      li.className="p-2 bg-white rounded flex justify-between items-center shadow";
      li.textContent=a.texto;
      if(role==="gestor"){
        const btn=document.createElement("button");
        btn.textContent="Excluir"; btn.className="bg-red-500 text-white px-2 py-1 rounded ml-2";
        btn.onclick=()=>{ avisos.splice(i,1); saveAvisos(avisos); renderAvisos(); };
        li.appendChild(btn);
      }
      lista.appendChild(li);
    });
    document.getElementById("formAviso").style.display=(role==="gestor")?"flex":"none";
  }
  document.getElementById("formAviso")?.addEventListener("submit",e=>{
    e.preventDefault();
    const texto=document.getElementById("textoAviso").value.trim();
    if(!texto) return;
    const avisos=loadAvisos();
    avisos.push({texto}); saveAvisos(avisos); document.getElementById("textoAviso").value="";
    renderAvisos();
  });
 
  // ---------- Fórum ----------
  function loadForum(){ return JSON.parse(localStorage.getItem("forum")||"[]"); }
  function saveForum(f){ localStorage.setItem("forum",JSON.stringify(f)); }
  function renderForum(){
    const lista=document.getElementById("listaForum"); lista.innerHTML="";
    const mensagens=loadForum();
    mensagens.forEach((m,i)=>{
      const div=document.createElement("div");
      div.className="p-2 bg-white rounded shadow flex justify-between";
      div.textContent=m.texto;
      if(role==="gestor"){
        const btn=document.createElement("button");
        btn.textContent="Excluir"; btn.className="bg-red-500 text-white px-2 py-1 rounded ml-2";
        btn.onclick=()=>{ mensagens.splice(i,1); saveForum(mensagens); renderForum(); };
        div.appendChild(btn);
      }
      lista.appendChild(div);
    });
  }
  document.getElementById("formForum")?.addEventListener("submit",e=>{
    e.preventDefault();
    const texto=document.getElementById("textoForum").value.trim();
    if(!texto) return;
    const forum=loadForum();
    forum.push({texto}); saveForum(forum); document.getElementById("textoForum").value="";
    renderForum();
  });
 
  // ---------- Calendário ----------
  let hoje=new Date(); let mesAtual=hoje.getMonth(); let anoAtual=hoje.getFullYear();
  function loadEventos(){ return JSON.parse(localStorage.getItem("eventos")||"[]"); }
  function saveEventos(e){ localStorage.setItem("eventos",JSON.stringify(e)); }
  function renderCalendario(){
    const lista=document.getElementById("listaEventos"); lista.innerHTML="";
    const eventos=loadEventos();
    const grid=document.getElementById("calendarioGrid"); grid.innerHTML="";
    const primeiro=new Date(anoAtual,mesAtual,1); const ultimo=new Date(anoAtual,mesAtual+1,0);
    document.getElementById("mesAtual").textContent=primeiro.toLocaleString('pt-BR',{month:'long',year:'numeric'});
    const diasAntes=primeiro.getDay();
    for(let i=0;i<diasAntes;i++){ const div=document.createElement("div"); grid.appendChild(div); }
    for(let d=1;d<=ultimo.getDate();d++){
      const div=document.createElement("div");
      div.textContent=d;
      const dataStr=`${anoAtual}-${String(mesAtual+1).padStart(2,'0')}-${String(d).padStart(2,'0')}`;
      const eventosDoDia=eventos.filter(ev=>ev.data===dataStr);
      if(d===hoje.getDate() && mesAtual===hoje.getMonth() && anoAtual===hoje.getFullYear()) div.classList.add("hoje");
      if(eventosDoDia.length){
        div.classList.add("evento","tooltip");
        const span=document.createElement("span"); span.className="tooltiptext"; span.textContent=eventosDoDia.map(ev=>ev.desc).join(", "); div.appendChild(span);
      }
      grid.appendChild(div);
    }
    document.getElementById("formEvento").style.display=(role==="gestor")?"flex":"none";
    eventos.forEach(ev=>{ const li=document.createElement("li"); li.className="p-2 bg-white rounded shadow flex justify-between items-center"; li.textContent=`${ev.data}: ${ev.desc}`; if(role==="gestor"){ const btn=document.createElement("button"); btn.textContent="Excluir"; btn.className="bg-red-500 text-white px-2 py-1 rounded ml-2"; btn.onclick=()=>{ const evs=loadEventos().filter(e=>e!==ev); saveEventos(evs); renderCalendario(); }; li.appendChild(btn); } lista.appendChild(li); });
  }
  function mudarMes(sinal){ mesAtual+=sinal; if(mesAtual<0){ mesAtual=11; anoAtual--; } if(mesAtual>11){ mesAtual=0; anoAtual++; } renderCalendario(); }
  document.getElementById("formEvento")?.addEventListener("submit",e=>{
    e.preventDefault(); if(role!=="gestor") return;
    const data=document.getElementById("dataEvento").value; const desc=document.getElementById("descEvento").value.trim();
    if(!data||!desc) return;
    const eventos=loadEventos(); eventos.push({data,desc}); saveEventos(eventos); document.getElementById("dataEvento").value=""; document.getElementById("descEvento").value=""; renderCalendario();
  });
 
  // ---------- Chapas ----------
  function loadChapas(){ return JSON.parse(localStorage.getItem("chapas")||"[]"); }
  function saveChapas(c){ localStorage.setItem("chapas",JSON.stringify(c)); }
  function renderChapas(){
    const lista=document.getElementById("listaChapas"); lista.innerHTML="";
    const chapas=loadChapas();
    chapas.forEach((c,i)=>{
      const li=document.createElement("li");
      li.className="p-2 bg-white rounded shadow flex flex-col";
      const titulo=document.createElement("h3"); titulo.className="font-bold text-lg"; titulo.textContent=c.nome; li.appendChild(titulo);
      const prop=document.createElement("p"); prop.textContent=c.proposta; li.appendChild(prop);
      const integ=document.createElement("p"); integ.className="italic"; integ.textContent="Integrantes: "+c.integrantes; li.appendChild(integ);
      if(c.imagem){ const img=document.createElement("img"); img.src=c.imagem; img.className="mt-2 max-h-40"; li.appendChild(img); }
      if(role==="gestor"){ const btn=document.createElement("button"); btn.textContent="Excluir"; btn.className="bg-red-500 text-white px-2 py-1 rounded mt-2"; btn.onclick=()=>{ chapas.splice(i,1); saveChapas(chapas); renderChapas(); }; li.appendChild(btn); }
      lista.appendChild(li);
    });
    document.getElementById("formChapa").style.display=(role==="gestor")?"flex":"none";
  }
  document.getElementById("formChapa")?.addEventListener("submit",e=>{
    e.preventDefault(); if(role!=="gestor") return;
    const nome=document.getElementById("nomeChapa").value.trim();
    const proposta=document.getElementById("propostaChapa").value.trim();
    const integrantes=document.getElementById("integrantesChapa").value.trim();
    const img=document.getElementById("imagemChapa").files[0];
    if(!nome||!proposta) return;
    if(img){ const reader=new FileReader(); reader.onload=(ev)=>{ const chapas=loadChapas(); chapas.push({nome,proposta,integrantes,imagem:ev.target.result}); saveChapas(chapas); renderChapas(); }; reader.readAsDataURL(img); } else { const chapas=loadChapas(); chapas.push({nome,proposta,integrantes}); saveChapas(chapas); renderChapas(); }
    document.getElementById("nomeChapa").value=""; document.getElementById("propostaChapa").value=""; document.getElementById("integrantesChapa").value=""; document.getElementById("imagemChapa").value="";
  });
 
  // ---------- Inicial ----------
  mostrarTela("avisos");
</script>
 
</body>
</html>
 
 
